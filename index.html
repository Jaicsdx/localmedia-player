<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Local Media Player</title>
  <style>
    body{margin:0; background:#0f1116; color:#e6e8ee; font-family:system-ui; display:flex; flex-direction:column; height:100vh}
    header{padding:12px; background:#151823; display:flex; justify-content:space-between; align-items:center}
    .movies{flex:1; overflow-y:auto; padding:12px; display:grid; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); gap:12px}
    .movie{background:#1b2131; padding:10px; border-radius:12px; cursor:pointer}
    .movie:hover{background:#283044}
    .movie-title{font-weight:700}
    .player{background:black; display:flex; justify-content:center; align-items:center; flex-direction:column; padding:12px}
    video{max-width:100%; max-height:70vh; border-radius:12px}
    .controls{margin-top:8px; display:flex; gap:8px}
    .btn{background:#4f8cff; color:white; padding:8px 12px; border:none; border-radius:8px; cursor:pointer}
    .btn:hover{background:#3570e6}
  </style>
</head>
<body>
  <header>
    <h2>Local Media Player</h2>
    <!-- ðŸ‘‡ Added explicit extensions so MKV, AVI, MOV show up -->
    <input type="file" id="fileInput" accept="video/*,.mkv,.avi,.mov,.mp4,.webm" multiple />
  </header>

  <div class="player">
    <video id="video" controls></video>
    <div class="controls">
      <button class="btn" id="fullscreenBtn">Fullscreen</button>
      <button class="btn" id="stopBtn">Stop</button>
    </div>
    <div id="nowPlaying" style="margin-top:6px; font-size:13px; color:#8e95a5">Nothing playing</div>
  </div>

  <div class="movies" id="movieList"></div>

<script>
const fileInput = document.getElementById('fileInput');
const movieList = document.getElementById('movieList');
const video = document.getElementById('video');
const nowPlaying = document.getElementById('nowPlaying');

let files = [];

fileInput.addEventListener('change', e => {
  files = Array.from(e.target.files);
  renderList();
});

function renderList(){
  movieList.innerHTML = files.map((f,i)=>`
    <div class="movie" data-index="${i}">
      <div class="movie-title">${f.name}</div>
    </div>
  `).join('');
}

movieList.addEventListener('click', e=>{
  const card = e.target.closest('.movie');
  if(!card) return;
  const i = card.dataset.index;
  playFile(files[i]);
});

function playFile(file){
  const url = URL.createObjectURL(file);
  video.src = url;
  video.play();
  nowPlaying.textContent = "Now Playing: " + file.name;
}

document.getElementById('stopBtn').addEventListener('click', ()=>{
  video.pause();
  video.src = "";
  nowPlaying.textContent = "Nothing playing";
});

document.getElementById('fullscreenBtn').addEventListener('click', ()=>{
  if(document.fullscreenElement) document.exitFullscreen();
  else video.requestFullscreen();
});
</script>
</body>
</html>
